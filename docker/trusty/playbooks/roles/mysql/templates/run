#!/bin/sh

set -e

cd /
umask 077

mkdir -p /var/lib/mysql
chown mysql:mysql /var/lib/mysql

MYSQLADMIN='/usr/bin/mysqladmin --defaults-extra-file=/etc/mysql/debian.cnf'

trap "$MYSQLADMIN shutdown" 0
trap 'exit 2' 1 2 3 15

/usr/sbin/mysqld --skip-grant-tables & wait
